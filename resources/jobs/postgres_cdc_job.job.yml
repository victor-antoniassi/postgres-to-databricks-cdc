# Job definition for the PostgreSQL to Databricks CDC pipeline.

resources:
  jobs:
    postgres_cdc_job_definition:
      name: ${bundle.target}-postgres-cdc-pipeline

      tasks:
        - task_key: cdc_load_task
          python_wheel_task:
            package_name: postgres-to-databricks-cdc
            entry_point: run_pipeline
            parameters:
              - "--mode"
              - "cdc"
          environment_key: default

      environments:
        - environment_key: default
          spec:
            environment_version: "2"
            # The bundle automatically includes the project wheel artifact.
            # Additional libraries are specified here.
            dependencies:
              - "dlt[databricks,postgres,sql-database]>=1.18.2"
              - "typing-extensions>=4.11.0"
              - "rich>=13.7.0"
              - ../../dist/*.whl

